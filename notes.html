<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cool Notes</title>
    <link rel="stylesheet" href="public/styles/note_styles.css">
</head>

<body>
    <script src="public\js\newsection.js"></script>

    <div class="grid-container" id = "container">
        <a href="home.html" class="back_button">
            <img src="public/images/back arrow better.png" alt="back arrow" style="width:42px;height:42px;">
          </a>
        <div id="textEditor" contenteditable="true">
            This is an example text. Select a part of this text and click the buttons to format it.
        </div>
        <img class="hiddenPicture" id="hiddenImage" src="" style="display: none;" alt="Hidden Image">
        <div class="icon-bar">
            <img id="logo" class="notes_logo" src="public/images/cool_notes_logo.jpg">
            <button type="button" class="newSection"><b>New Section</b></button>
            <button type="button" id="newPicture"><b>New Picture</b></button>
            <script>

                function searchFiles() {
                    const searchTerm = document.getElementById("searchInput").value;
                    const searchResults = document.getElementById("searchResults");
                    searchResults.innerHTML = ""; // Clear previous results

                    // Get a list of all files in the input type=file element
                    const fileInput = document.createElement("input");
                    fileInput.type = "file";
                    fileInput.multiple = true;
                    fileInput.style.display = "none";

                    // Attach an event listener to the file input to handle selected files
                    fileInput.addEventListener("change", function() {
                        const files = Array.from(fileInput.files);
                        const results = files.filter(file => file.name.includes(searchTerm));
                        displaySearchResults(results);
                    });

                    // Trigger the file input dialog
                    fileInput.click();
                }

                function displaySearchResults(results) {
                    const searchResults = document.getElementById("searchResults");
                    if (results.length === 0) {
                        searchResults.innerHTML = "No results found.";
                        return;
                    }

                    results.forEach(result => {
                        const listItem = document.createElement("li");
                        listItem.textContent = result.name;
                        searchResults.appendChild(listItem);
                    });
                }

                //this is for the new picture button
                const showButton = document.getElementById('newPicture');
                const hiddenImage = document.getElementById('hiddenImage');
    
                showButton.addEventListener('click', function() {
                    hiddenImage.style.display = 'block';
                    hiddenImage.src = "";
                });
            </script>
            <div class="drop">
                <button type="button" class="format"><b>Formatting</b></button>
                <div class="dropdown-content">
                    <button onclick="formatText('bold')">Bold</button>
                    <button onclick="formatText('italic')">Italic</button>
                    <button onclick="formatText('underline')">Underline</button>
                    <script src="public/js/formatting.js"></script>
                </div>
            </div>

            <script>
                function addcode(){
                    document.getElementById("textEditor").innerHTML
                    += "<h2>This is the new section you added</h2>"
                }
            </script>
        </div>
        
        <img class="hiddenPicture" id="hiddenImage" src="" style="display: none;" alt="Hidden Image">
        <script>
            //this is for the new picture button
            const showButton1 = document.getElementById('newPicture');
            const hiddenImage1 = document.getElementById('hiddenImage');

            showButton.addEventListener('click', function() {
                hiddenImage1.style.display = 'block'
            });
        </script>
</body>
<script src="public/js/saver.js"></script>
</html>